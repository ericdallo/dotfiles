{
    "$schema": "https://eca.dev/config.json",
    "defaultModel": "nubank-anthropic/opus-4.6",
    "autoCompactPercentage": 85,
    "providers": {
        "nubank": {
            "api": "openai-responses",
            "url": "${env:NULITELLM_API_URL}",
            "key": "${env:NULITELLM_API_KEY}",
            "fetchModels": false,
            "models": {"gpt-5.2": {},
                       "gpt-5.2-xhigh": {
                           "modelName": "openai/gpt-5.2",
                           "extraPayload": {"reasoning": {"effort": "xhigh"}}
                       },
                       "gpt-5.2-codex": {"extraPayload": {"reasoning": { "effort": "high" }}},
                       "gpt-5.3-codex": {},
                       "gpt-5-nano": {},
                       "gpt-5-mini": {},
                       "gpt-4.1": {}}
        }, 
        "nubank-anthropic": {
            "api": "anthropic",
            "url": "${env:NULITELLM_API_URL}",
            "key": "${env:NULITELLM_API_KEY}",
            "fetchModels": false,
            "models": {
                "sonnet-4.6": {
                    "modelName": "anthropic/claude-sonnet-4-6"
                },
                "opus-4.6": {
                    "modelName": "anthropic/claude-opus-4-6",
                    "variants": {"max": {"output_config": {"effort": "max"}, "thinking": {"type": "adaptive"}}}
                }
            }
        },
        "nubank-inference": {
            "api": "openai-chat",
            "url": "${env:NULITELLM_API_URL}",
            "key": "${env:NULITELLM_API_KEY}",
            "fetchModels": false,
            "models": {
                "bdc": {
                    "modelName": "inference/nubank-custom-model-original"
                }
            }
        }
        // "openrouter": {
        //     "api": "openai-chat",
        //     "url": "https://openrouter.ai/api/v1",
        //     "key": "${env:OPENROUTER_API_KEY}",
        //     "models": {"z-ai/glm-4.5-air:free": {},
        //                "qwen/qwen3-coder:free": {}}
        // },
        // "github-copilot": {
        //     "models": {
        //         "gpt-5-mini-non-stream": {
        //             "modelName": "gpt-5-mini",
        //             "extraPayload": {"stream": false}
        //         }
        //     }
        // },
        // "lmstudio": {
        //     "api": "openai-chat",
        //     "url": "http://localhost:1234",
        //     "completionUrlRelativePath": "/v1/chat/completions",
        //     "httpClient": {
        //         "version": "http-1.1"
        //     },
        //     "models": {
        //         "foo": {}
        //     }
        // }
    },
    "completion": {"model": "nubank/gpt-5.2"},
    "rewrite": {"model": "nubank/gpt-5.2"},
    "hooks": {
        "notify-finished": {
            "type": "postRequest",
            "visible": false,
            "actions": [
                {
                    "type": "shell",
                    "shell": "canberra-gtk-play -i complete"
                }
            ]
        },
        "notify-approval": {
            "type": "preToolCall",
            "visible": false,
            "actions": [
                {
                    "type": "shell",
                    "shell": "jq -e '.approval == \"ask\"' > /dev/null && canberra-gtk-play -i message"
                }
            ]
        },
        "brepl-validate" : {
            "type" : "preToolCall",
            "matcher" : "eca__(write_file|edit_file)",
            "visible": false,
            "actions" : [ {
                "type" : "shell",
                "shell" : "/home/greg/dev/brepl/brepl eca validate"
            } ]
        },
        "brepl-eval" : {
            "type" : "postToolCall",
            "visible": false,
            "matcher" : "eca__(write_file|edit_file)",
            "actions" : [ {
                "type" : "shell",
                "shell" : "/home/greg/dev/brepl/brepl eca eval"
            } ]
        },
        "brepl-session-end" : {
            "type" : "sessionEnd",
            "visible": false,
            "actions" : [ {
                "type" : "shell",
                "shell" : "/home/greg/dev/brepl/brepl eca session-end"
            } ]
        }
    },
    "toolCall": {
        "approval": {
            "allow": {"nu-mcp": {},
                      "clojure-mcp-clj": {}}
        }
    },
    "agent": {
        "code-reviewer": {
            "mode": "subagent",
            "description": "Code reviewer for project changes, use it when asked to review code",
            "systemPrompt": "You are expert in code review, analyze the changes in git and be rigorous about the changes."
        }
    },
    "mcpServers": {
        // "clojure-mcp-clj": {
        //     "command": "bash",
        //      "args": ["-c", "clojure -X:mcp-deps"]
        // },
        // "nu-mcp": {
        //     "command": "$HOME/dev/nu/nu-mcp/run.sh",
        //     "args": ["--auto"],
        //     "env": {"MCP_DEBUG": "true"}
        // }
        // "web-reader": {
        //     "url": "https://api.z.ai/api/mcp/web_reader/mcp",
        //     "headers": {
        //         "Authorization": "Bearer APIKEY"
        //     }
        // }
        // "data-discovery": {
        //     "command": "nu-data services mcp global data-discovery --env prod --country data"
        // }
        // "github-http": {
        //     "url": "https://api.githubcopilot.com/mcp/"
        // }
        // "miro": {
        //     "url": "https://mcp.miro.com/" 
        // }
        // "atlasian-http": {
        //     "url": "https://mcp.atlassian.com/v1/sse"
        // }
        // "hugging": {
        //     "url": "https://huggingface.co/mcp"
        // }
        // "fetch": {
        //     "command": "docker",
        //     "args": ["run", "-i", "--rm", "mcp/fetch"]
        // }
        // "github": {
        //     "command": "npx",
        //     "args": ["mcp-remote", "https://api.githubcopilot.com/mcp/"]
        // }
        // "memory": {
        //     "command": "npx",
        //     "args": ["-y", "@modelcontextprotocol/server-memory"]
        // },

        // "filesystem": {
        //     "command": "npx",
        //     "args": ["-y", "@modelcontextprotocol/server-filesystem", "$HOME/dev"]
        // }
    }
    , "otlp": {
    "otel.exporter.otlp.metrics.protocol": "http/protobuf",
    "otel.exporter.otlp.metrics.endpoint": "https://prod-global-workstation-proxy.ist.nubank.world/api/telemetry/metrics"
  }
}
